<project name="deploy-targets">

    <target name="deploy:staging">
        <echo message="Deploying to staging server (${deploy.staging.server})..."/>
        <exec executable="scp" failonerror="true">
            <arg value="${target.dir}/${app.zip.name}"/>
            <arg value="${deploy.staging.user}@${deploy.staging.server}:${deploy.staging.path}"/>
        </exec>
        <exec executable="scp" failonerror="true">
            <arg value="${target.dir}/bootstrap.sh"/>
            <arg value="${deploy.staging.user}@${deploy.staging.server}:${deploy.staging.path}"/>
        </exec>
        <exec executable="sh" failonerror="true">
            <arg value="${target.dir}/auto-deploy.sh"/>
            <arg value="${deploy.staging.user}"/>
            <arg value="${deploy.staging.server}"/>
            <arg value="${deploy.staging.path}"/>
            <arg value="${app.zip.name}"/>
        </exec>
    </target>

    <target name="deploy:copy-resources">
        <copy verbose="true" file="${ops.deploy.dir}/auto-deploy.sh" todir="${target.dir}"/>
        <copy verbose="true" file="${ops.deploy.dir}/bootstrap.sh" todir="${target.dir}"/>
    </target>

</project>
