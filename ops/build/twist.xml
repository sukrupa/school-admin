<project name="twist">

    <target name="execute-twist">
        <exec command="${ops.local.dir}/kill-firefox.sh" />
        <echo message="Executing Twist tests from ${src.test.functional.dir}."/>

        <taskdef classname="com.thoughtworks.twist.core.execution.ant.ExecuteScenariosTask"
                 classpathref="scenarios.classpath"
                 name="twist.runner"/>

        <twist.runner
                scenarioDir="${src.test.functional.dir}/scenarios"
                reportsDir="${target.reports.dir}"
                confDir="${twist-config}"
                failureproperty="twist.scenarios.failed"
                classpathref="scenarios.classpath"
                tags="!in-progress">
            <fileset dir="${src.test.functional.dir}/scenarios" includes="*"/>
        </twist.runner>

        <exec command="${ops.local.dir}/kill-firefox.sh" />

        <fail if="twist.scenarios.failed" message="Twist tests have failed."/>
    </target>

</project>